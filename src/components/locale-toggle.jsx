import { useCallback, useSyncExternalStore } from 'react'
import { cn } from '../lib/utils'

// Locale values: 'zh' | 'zh-Hant' | 'en'
const LOCALE_KEY = 'ds-locale-preference'

// Translations
const translations = {
  zh: {
    // Nav
    'nav.features': '功能',
    'nav.docs': '文档',
    'nav.download': '下载',
    
    // Hero
    'hero.title': 'DeepStudent',
    'hero.subtitle': 'AI 原生的本地优先学习系统',
    'hero.tagline': '智能对话、知识管理、Anki 制卡与全能阅读器无缝融合\n为你打造隐私安全、高度可扩展的终身学习工作台',
    'hero.cta.download': '立即下载',
    'hero.cta.explore': '了解更多',

    // Hero Preview
    'hero.preview.chat': '智能对话',
    'hero.preview.skills': '技能系统',
    'hero.preview.knowledge': '学习资源',
    'hero.preview.providers': 'Anki 制卡',
    'hero.preview.selector': '界面预览切换',
    'hero.preview.imageAlt': 'DeepStudent {label} 界面预览',
    
    // Feature Tabs
    'featureTab.chat': '智能对话',
    'featureTab.notes': '笔记',
    'featureTab.textbook': '教材',
    'featureTab.qbank': '题库',
    'featureTab.essay': '作文',
    'featureTab.translate': '翻译',
    'featureTab.mindmap': '导图',
    'featureTab.skills': '技能系统',
    'featureTab.anki': 'Anki 制卡',
    'featureTab.privacy': '本地优先',
    
    // ========== 笔记系统 ==========
    'feature.notes.title': '笔记系统',
    'feature.notes.desc': 'Markdown 编辑器 + 版本历史 + AI 辅助写作。标签分类、收藏管理，打造你的第二大脑。',
    'notes.markdown': 'Markdown 编辑',
    'notes.markdownDesc': '完整 Markdown 语法支持',
    'notes.version': '版本历史',
    'notes.versionDesc': '多版本历史，随时回溯',
    'notes.ai': 'AI 辅助',
    'notes.aiDesc': 'AI 续写与浮动助手',
    'notes.link': '标签分类',
    'notes.linkDesc': '多标签分类管理',
    'notes.editor': 'Markdown 编辑器',
    'notes.sampleTitle': '线性代数学习笔记',
    'notes.sampleContent': '矩阵的特征值与特征向量...',
    'notes.autoSave': '已自动保存',
    
    // ========== 教材管理 ==========
    'feature.textbook.title': '教材管理',
    'feature.textbook.desc': '支持 16+ 文档格式，PDF/Word/EPUB 一键导入。双引擎 OCR 识别扫描件，导入即自动向量化，AI 可读可检索。',
    'textbook.formats': '多格式支持',
    'textbook.formatsDesc': 'PDF、Word、EPUB、PPT 等 16+ 格式',
    'textbook.ocr': 'OCR 识别',
    'textbook.ocrDesc': 'DeepSeek + PaddleOCR 双引擎',
    'textbook.reader': '阅读器',
    'textbook.readerDesc': '内置 PDF/EPUB 阅读器',
    'textbook.search': '语义搜索',
    'textbook.searchDesc': '全文 + 向量检索',
    'textbook.viewer': '教材阅读器',
    'textbook.indexed': '已索引',
    
    // ========== 题目集/刷题 ==========
    'feature.qbank.title': '题目集 · 刷题系统',
    'feature.qbank.desc': '拍照识题 + AI 解答 + 8 种练习模式。支持顺序/随机/错题优先/限时/模拟考试/每日一练，错题本自动归档。',
    'qbank.ocr': '拍照识题',
    'qbank.ocrDesc': 'OCR 识别 + 题型分类',
    'qbank.modes': '练习模式',
    'qbank.modesDesc': '顺序/随机/错题/限时/模拟/每日',
    'qbank.ai': 'AI 解答',
    'qbank.aiDesc': '自动调用对话分析解答',
    'qbank.stats': '统计分析',
    'qbank.statsDesc': '正确率、用时、知识点分布',
    'qbank.daily': '每日一练',
    'qbank.dailyDesc': '智能推荐 + 打卡日历',
    'qbank.practiceMode': '练习模式',
    'qbank.randomPractice': '随机练习',
    'qbank.currentQuestion': '当前进度',
    
    // ========== 作文批改 ==========
    'feature.essay.title': '作文批改',
    'feature.essay.desc': '流式批改 + 按考试标准多维评分 + 针对性修改建议。支持手写作文 OCR 识别。',
    'essay.streaming': '流式批改',
    'essay.streamingDesc': '实时显示批改结果',
    'essay.dimensions': '多维评分',
    'essay.dimensionsDesc': '按考试标准多维度评分',
    'essay.suggestions': '修改建议',
    'essay.suggestionsDesc': '针对性改进意见',
    'essay.ocr': '手写识别',
    'essay.ocrDesc': '支持手写作文图片',
    'essay.grading': 'AI 批改中',
    'essay.grammar': '语法',
    'essay.structure': '结构',
    'essay.content': '内容',
    'essay.vocabulary': '词汇',
    
    // ========== 翻译工作台 ==========
    'feature.translate.title': '翻译工作台',
    'feature.translate.desc': '支持 12 种语言互译，双栏同步滚动显示。OCR 识别后翻译、TTS 朗读，一站式翻译体验。',
    'translate.languages': '多语言',
    'translate.languagesDesc': '中/英/日/韩/法/德等 11 种',
    'translate.compare': '双栏视图',
    'translate.compareDesc': '左右双栏同步滚动',
    'translate.ocr': 'OCR 翻译',
    'translate.ocrDesc': '图片/文档识别翻译',
    'translate.tts': 'TTS 朗读',
    'translate.ttsDesc': '文本转语音',
    'translate.chinese': '中文',
    'translate.english': 'English',
    'translate.sampleSource': '深度学习是人工智能的重要分支。',
    'translate.sampleTarget': 'Deep learning is a key branch of AI.',
    'translate.copy': '复制',
    
    // ========== 知识导图 ==========
    'feature.mindmap.title': '知识导图',
    'feature.mindmap.desc': '思维导图、逻辑树、组织架构图等多种布局。节点编辑、搜索定位，导出 OPML/Markdown/JSON/图片。',
    'mindmap.layouts': '多种布局',
    'mindmap.layoutsDesc': '思维导图/逻辑树/组织架构',
    'mindmap.export': '导出格式',
    'mindmap.exportDesc': 'OPML/Markdown/JSON/PNG/SVG',
    'mindmap.style': '样式自定义',
    'mindmap.styleDesc': '颜色、字体、连线',
    'mindmap.ai': 'AI 生成',
    'mindmap.aiDesc': '从文档自动生成导图',
    'mindmap.editor': '知识导图编辑器',
    'mindmap.center': '中心主题',
    'mindmap.branch1': '分支 1',
    'mindmap.branch2': '分支 2',
    'mindmap.branch3': '分支 3',
    'mindmap.branch4': '分支 4',

    // Stats Highlight
    'stats.title': '为深度学习而生',
    'stats.subtitle': '渐进披露架构，工具按需加载，覆盖学习全场景',
    'stats.tools': '内置工具',
    'stats.toolsDesc': '知识检索、笔记、Anki、题库等',
    'stats.providers': 'API 供应商',
    'stats.providersDesc': 'OpenAI、Claude、硅基流动等',
    'stats.modes': '练习模式',
    'stats.modesDesc': '顺序、随机、错题优先等',
    'stats.formats': '文档格式',
    'stats.formatsDesc': 'PDF、Word、EPUB 等',

    // Sub-features - 智能对话
    'subfeature.chatBase': '基础对话能力',
    'subfeature.chatBaseDesc': '多会话管理、流式响应、消息操作',
    'subfeature.chatBase.d1': '多会话管理',
    'subfeature.chatBase.d2': '流式响应',
    'subfeature.chatBase.d3': '消息编辑/重试',
    'subfeature.chatBase.d4': 'Token 估算',
    'subfeature.chatBase.d5': '会话回收站',
    'subfeature.chatBase.d6': '附件拖拽上传',
    'subfeature.blocks': '块渲染插件',
    'subfeature.blocksDesc': '16+ 种内容块类型，插件化架构',
    'subfeature.blocks.d1': 'thinking 思维链',
    'subfeature.blocks.d2': 'rag 知识检索',
    'subfeature.blocks.d3': 'webSearch 网络搜索',
    'subfeature.blocks.d4': 'mcpTool 工具调用',
    'subfeature.blocks.d5': 'ankiCards 卡片生成',
    'subfeature.blocks.d6': 'imageGen 图像生成 (开发中)',
    'subfeature.agentTools': 'Agent 工具调用',
    'subfeature.agentToolsDesc': '借助 Skills 工具组原生读写学习数据',
    'subfeature.agentTools.d1': '知识检索工具组',
    'subfeature.agentTools.d2': '笔记读写工具组',
    'subfeature.agentTools.d3': '题库操作工具组',
    'subfeature.agentTools.d4': 'Anki 制卡工具组',
    'subfeature.agentTools.d5': '记忆读写工具组',
    'subfeature.agentTools.d6': '资源访问工具组',
    'subfeature.thinking': '推理模式',
    'subfeature.thinkingDesc': '支持 o1/DeepSeek-R1 等推理模型',
    'subfeature.thinking.d1': '思维链展示',
    'subfeature.thinking.d2': '可展开/折叠',
    'subfeature.thinking.d3': '推理模型适配',
    'subfeature.multiModel': '多模型并行对比',
    'subfeature.multiModelDesc': '同时对比多个模型回答',
    'subfeature.multiModel.d1': '多模型选择',
    'subfeature.multiModel.d2': '并行变体视图',
    'subfeature.multiModel.d3': '功能开关',
    'subfeature.context': '上下文引用',
    'subfeature.contextDesc': '直接引用学习资源作为上下文',
    'subfeature.context.d1': '资源拖拽引用',
    'subfeature.context.d2': '来源面板',
    'subfeature.context.d3': '多来源类型',
    
    // Sub-features - 学习资源
    'subfeature.resourceTypes': '资源类型',
    'subfeature.resourceTypesDesc': '8 种资源类型统一管理',
    'subfeature.resourceTypes.d1': '笔记 nt_',
    'subfeature.resourceTypes.d2': '教材 tb_',
    'subfeature.resourceTypes.d3': '题目集 ex_',
    'subfeature.resourceTypes.d4': '作文 es_',
    'subfeature.resourceTypes.d5': '翻译 tr_',
    'subfeature.resourceTypes.d6': '知识导图 mm_',
    'subfeature.docFormats': '文档格式',
    'subfeature.docFormatsDesc': '支持 16+ 种文档格式',
    'subfeature.docFormats.d1': 'Word/Excel/PPT',
    'subfeature.docFormats.d2': 'PDF（文本+扫描）',
    'subfeature.docFormats.d3': 'EPUB 电子书',
    'subfeature.docFormats.d4': 'Markdown/HTML/TXT',
    'subfeature.ocr': 'OCR 引擎',
    'subfeature.ocrDesc': '双引擎智能识别',
    'subfeature.ocr.d1': 'DeepSeek OCR',
    'subfeature.ocr.d2': 'PaddleOCR-VL',
    'subfeature.vectorIndex': '向量化索引',
    'subfeature.vectorIndexDesc': '导入即自动向量化检索',
    'subfeature.vectorIndex.d1': 'LanceDB 存储',
    'subfeature.vectorIndex.d2': 'FTS 全文检索',
    'subfeature.vectorIndex.d3': '批量处理',
    'subfeature.vectorIndex.d4': '失败重试',
    'subfeature.vectorIndex.d5': '多维度嵌入',
    'subfeature.finder': '文件管理',
    'subfeature.finderDesc': '访达式文件管理体验',
    'subfeature.finder.d1': '桌面快捷方式',
    'subfeature.finder.d2': '收藏夹',
    'subfeature.finder.d3': '回收站',
    'subfeature.finder.d4': '全局搜索',
    'subfeature.finder.d5': '批量操作',
    'subfeature.finder.d6': '多选移动删除',
    
    // Sub-features - 技能系统
    'subfeature.instructionSkills': '指令型技能',
    'subfeature.instructionSkillsDesc': '改变 AI 行为模式的预配置技能',
    'subfeature.instructionSkills.d1': '导师模式',
    'subfeature.instructionSkills.d2': '制卡模式',
    'subfeature.instructionSkills.d3': '文献综述',
    'subfeature.instructionSkills.d4': '调研模式',
    'subfeature.toolSkills': '工具组技能',
    'subfeature.toolSkillsDesc': '原生读写 VFS 学习数据的工具组',
    'subfeature.toolSkills.d1': '知识检索 5 工具',
    'subfeature.toolSkills.d2': '画布笔记 7 工具',
    'subfeature.toolSkills.d3': 'VFS 记忆 6 工具',
    'subfeature.toolSkills.d4': '学习资源 4 工具',
    'subfeature.toolSkills.d5': 'Anki 工具 6 工具',
    'subfeature.toolSkills.d6': '题库工具 12 工具',
    'subfeature.builtinTools': '内置工具',
    'subfeature.builtinToolsDesc': '覆盖学习全场景的工具集',
    'subfeature.builtinTools.d1': 'rag_search',
    'subfeature.builtinTools.d2': 'web_search',
    'subfeature.builtinTools.d3': 'note_*',
    'subfeature.builtinTools.d4': 'anki_*',
    'subfeature.builtinTools.d5': 'qbank_*',
    'subfeature.builtinTools.d6': 'workspace_*',
    'subfeature.customSkills': '自定义技能',
    'subfeature.customSkillsDesc': '用户可创建自定义技能',
    'subfeature.customSkills.d1': '创建/编辑技能',
    'subfeature.customSkills.d2': '导入/导出',
    'subfeature.customSkills.d3': '项目级技能',
    'subfeature.mcp': 'MCP 服务',
    'subfeature.mcpDesc': '支持 MCP 协议工具集成',
    'subfeature.mcp.d1': 'SSE 传输',
    'subfeature.mcp.d2': 'WebSocket 传输',
    'subfeature.mcp.d3': 'Stdio 代理',
    'subfeature.mcp.d4': '自动重连',
    
    // Sub-features - Anki 制卡
    'subfeature.ankiParse': '文档解析',
    'subfeature.ankiParseDesc': '支持 16+ 格式智能解析',
    'subfeature.ankiParse.d1': '智能分段',
    'subfeature.ankiParse.d2': '长文档切割',
    'subfeature.ankiParse.d3': 'AI 知识点提取',
    'subfeature.template': '卡片模板',
    'subfeature.templateDesc': '多种预设 + 自定义模板',
    'subfeature.template.d1': '极简卡片',
    'subfeature.template.d2': '编程卡片',
    'subfeature.template.d3': '选择题卡片',
    'subfeature.template.d4': '填空题卡片',
    'subfeature.template.d5': '语言学习卡片',
    'subfeature.template.d6': '自定义 HTML/CSS',
    'subfeature.ankiTools': 'Anki 工具',
    'subfeature.ankiToolsDesc': '完整的制卡工具链',
    'subfeature.ankiTools.d1': 'anki_generate_cards',
    'subfeature.ankiTools.d2': 'anki_control_task',
    'subfeature.ankiTools.d3': 'anki_export_cards',
    'subfeature.ankiTools.d4': 'anki_list_templates',
    'subfeature.ankiTools.d5': 'anki_analyze_content',
    'subfeature.ankiTools.d6': 'anki_query_progress',
    'subfeature.ankiExport': '导出同步',
    'subfeature.ankiExportDesc': 'APKG 导出 + AnkiConnect',
    'subfeature.ankiExport.d1': 'APKG 标准导出',
    'subfeature.ankiExport.d2': 'AnkiConnect 一键推送',
    'subfeature.preview3d': '卡片预览',
    'subfeature.preview3dDesc': '3D 翻转效果 + 断点续传',
    'subfeature.preview3d.d1': '3D 翻转预览',
    'subfeature.preview3d.d2': '暂停/恢复处理',
    'subfeature.preview3d.d3': '卡片编辑',
    
    // Sub-features - 本地优先
    'subfeature.databases': '数据库实例',
    'subfeature.databasesDesc': '4 个本地数据库实例',
    'subfeature.databases.d1': 'mistakes.db',
    'subfeature.databases.d2': 'chat_v2.db',
    'subfeature.databases.d3': 'vfs.db',
    'subfeature.databases.d4': 'llm_usage.db',
    'subfeature.chatTables': 'Chat 数据表',
    'subfeature.chatTablesDesc': '对话相关数据存储',
    'subfeature.chatTables.d1': 'chat_v2_sessions',
    'subfeature.chatTables.d2': 'chat_v2_messages',
    'subfeature.chatTables.d3': 'chat_v2_blocks',
    'subfeature.chatTables.d4': 'chat_v2_attachments',
    'subfeature.chatTables.d5': 'workspace_index',
    'subfeature.chatTables.d6': 'subagent_task',
    'subfeature.vfsTables': 'VFS 数据表',
    'subfeature.vfsTablesDesc': '资源相关数据存储',
    'subfeature.vfsTables.d1': 'resources',
    'subfeature.vfsTables.d2': 'notes/notes_versions',
    'subfeature.vfsTables.d3': 'exam_sheets',
    'subfeature.vfsTables.d4': 'questions',
    'subfeature.vfsTables.d5': 'vfs_index_*',
    'subfeature.vfsTables.d6': 'review_plans',
    'subfeature.backup': '分层备份',
    'subfeature.backupDesc': '4 级备份策略',
    'subfeature.backup.d1': 'Core (P0) 核心',
    'subfeature.backup.d2': 'Important (P1) 重要',
    'subfeature.backup.d3': 'Rebuildable (P2) 可重建',
    'subfeature.backup.d4': 'LargeAssets (P3) 大型资产',
    'subfeature.cloudSync': '云同步',
    'subfeature.cloudSyncDesc': '可选云端同步方案',
    'subfeature.cloudSync.d1': 'WebDAV 同步',
    'subfeature.cloudSync.d2': 'S3 对象存储',

    // Features
    'feature.review.title': '智能对话 · Agent 化',
    'feature.review.desc': '借助技能系统的工具组，AI 可原生检索、阅读、编辑 VFS 中的学习数据——笔记、教材、题目、翻译、作文。真正实现 AI 与学习数据的深度融合。',
    'feature.organize.title': '学习资源中心',
    'feature.organize.desc': '访达式管理所有学习资源——笔记、教材、题目集、翻译、作文、知识导图。统一存储在 VFS，Chat AI 可通过工具组原生检索、阅读、编辑。',
    'feature.compare.title': '技能系统 · 按需扩展',
    'feature.compare.desc': '渐进披露架构，工具按需加载。内置导师模式、制卡助手、文献综述、调研模式等技能，支持自定义与 MCP 生态集成。',
    'feature.spaced.title': 'Anki 智能制卡',
    'feature.spaced.desc': '从学习文档智能分段生成卡片。支持多模板、3D 预览、AnkiConnect 一键同步，让间隔重复触手可及。',
    'feature.knowledge.title': '本地优先 · 隐私安全',
    'feature.knowledge.desc': '所有数据存储在本地：SQLite 元数据 + LanceDB 向量库。支持完整备份与审计，你的学习记录完全由你掌控。',
    
    // Cards
    'card.analyzing': 'RAG 检索中',
    'card.justNow': '刚刚',
    'card.mastery': '知识库匹配度',
    'card.suggestion': '来源：',
    'card.myNotebook': '学习资源中心',
    'card.errorType': '技能模式',
    'card.calcError': '导师模式',
    'card.frequency': '激活状态',
    'card.high': '已启用',
    'card.question': '问题',
    'card.clickAnswer': '点击查看答案',
    'card.backToQuestion': '返回问题',
    'card.reference': '来源：线性代数笔记',
    'card.suggestionPrefix': '已检索到',
    'card.suggestionTopic': '3 条相关内容',
    'card.suggestionSuffix': '，可展开查看原文。',
    'card.calcErrorTip': '苏格拉底式教学：通过提问引导你逐步理解概念，而非直接给出答案。',
    'card.chatQuestion': '帮我理解矩阵的特征值分解',
    'card.chatAnswerSnippet': '我来引导你思考：首先，你知道什么是特征值吗？它和矩阵有什么关系？',
    
    // Notebook sample
    'notebook.item.calculusFinal': '高等数学笔记',
    'notebook.item.reading': '线性代数教材.pdf',
    'notebook.item.mechanics': '概率论题目集',
    'subject.math': '笔记',
    'subject.english': '教材',
    'subject.physics': '题目集',
    'time.today': '今天',
    'time.yesterday': '昨天',
    'time.twoDaysAgo': '2 天前',
    
    // Flashcard
    'flashcard.prompt': '什么是矩阵的特征值？',
    
    // Download
    'download.title': '下载 DeepStudent',
    'download.subtitle': '基于 Tauri 2.0 构建，本地优先的 AI 原生学习系统',
    'download.selectPlatform': '选择平台',
    'download.backHome': '返回首页',
    'download.dmgInstall': '正式版',
    'download.preview': '预览版',
    'download.version': '版本',
    'download.size': '大小',
    'download.system': '系统',
    'download.downloadDmg': '下载 DMG',
    'download.downloadExe': '下载 EXE',
    'download.requirements.macos': 'macOS 13+，Apple Silicon / Intel',
    'download.requirements.windows': 'Windows 11 / 10 22H2+',
    'download.description.macos': '支持智能对话、学习资源管理、Anki 制卡、技能系统。',
    'download.description.windows': '功能与 macOS 版一致，Windows 版仍在优化中。',
    'download.note.windowsPreview': 'Windows 版目前为预览版，如遇问题请在 GitHub 提交 Issue。',
    
    // FAQ
    'faq.title': '常见问题',
    'faq.subtitle': '关于 DeepStudent 的常见疑问解答',
    'faq.openSource.q': 'DeepStudent 是开源的吗？',
    'faq.openSource.a': '是的，DeepStudent 遵循 AGPL-3.0 开源许可证，完全开源。你可以在 GitHub 查看源码、提交 Issue 或参与共建。',
    'faq.openSource.link': '前往 GitHub',
    'faq.privacy.q': '我的数据存储在哪里？',
    'faq.privacy.a': 'DeepStudent 是本地优先应用。所有数据（SQLite 元数据 + LanceDB 向量库 + Blob 文件）存储在你的设备上，支持完整备份与审计。',
    'faq.privacy.action': '查看隐私政策',
    'faq.macosQuarantine.q': 'macOS 安装后提示“已损坏，无法打开”怎么办？',
    'faq.macosQuarantine.a': '可以在终端执行以下命令（把 <应用路径> 替换为你的应用路径；也可以把应用图标拖进终端自动填充路径）：',
    'faq.macosQuarantine.code': 'sudo xattr -r -d com.apple.quarantine <应用路径>',
    'faq.macosQuarantine.link': '查看完整步骤',
    'faq.windowsPreview.q': '如何配置 AI 模型？',
    'faq.windowsPreview.a': '进入设置 → API 配置，添加你的 AI 服务供应商（如 OpenAI、Anthropic、硅基流动等）的 API 密钥。推荐使用硅基流动的"一键分配"功能快速完成配置。',
    
    // Footer
    'footer.privacy': '隐私',
    'footer.about': '关于',
    'footer.terms': '条款',
    'footer.xiaohongshu': '小红书',
    
    // Policy Content
    'policy.about.title': '关于 DeepStudent',
    'policy.about.description': 'AI 原生的本地优先开源学习系统，将智能对话、知识管理、Anki 制卡与全能阅读器无缝融合。',
    'policy.about.section1.title': '核心理念',
    'policy.about.section1.body': '构建完全 AI 原生的学习闭环，解决碎片化学习痛点。',
    'policy.about.section1.point1': '虚拟文件系统 VFS 作为所有学习资源的单一数据源，AI 可读可检索。',
    'policy.about.section1.point2': '本地优先，数据安全可控，支持完整审计与备份。',
    'policy.about.section1.point3': 'Chat AI 通过 Skills 工具组原生检索、阅读、编辑所有子应用数据。',
    'policy.about.section2.title': '开源与共建',
    'policy.about.section2.body': 'DeepStudent 完全开源，欢迎提交 Issue 与 PR，共同改进学习体验。',
    'policy.about.section2.point1': '保持透明的开发节奏与版本发布记录。',
    'policy.about.section2.point2': '持续吸收社区的真实需求反馈。',
    'policy.about.section3.title': '联系我们',
    'policy.about.section3.body': '合作或建议请发送邮件至 team@deepstudent.ai，我们会尽快回复。',
    'policy.about.footer': '感谢你与我们一起打造更聪明、更高效的学习方式。',

    'policy.privacy.title': '隐私政策',
    'policy.privacy.description': '我们遵循最小化数据原则，确保每条学习记录都掌握在你手中。',
    'policy.privacy.section1.title': '收集范围',
    'policy.privacy.section1.body': '仅在你使用 DeepStudent 时记录必要的错题内容、标签与复习进度，不会采集与服务无关的敏感个人信息。',
    'policy.privacy.section1.point1': '账号信息仅用于云端同步与登录验证。',
    'policy.privacy.section1.point2': '你可随时导出或删除本地与云端数据。',
    'policy.privacy.section2.title': '使用方式',
    'policy.privacy.section2.body': '所有数据仅用于生成个性化学习建议与统计分析，不会出售或提供给第三方广告平台。',
    'policy.privacy.section2.point1': '统计分析仅使用匿名化、脱敏后的聚合数据。',
    'policy.privacy.section2.point2': '我们会定期发布透明度报告。',
    'policy.privacy.section3.title': '安全措施',
    'policy.privacy.section3.body': '所有传输均使用 TLS 加密，云端存储采用分区隔离，敏感字段在数据库内加盐散列。',
    'policy.privacy.section3.point1': '核心基础设施通过 ISO/IEC 27001 安全认证。',
    'policy.privacy.section3.point2': '如遇异常访问会立即告警并支持一键冻结账号。',
    'policy.privacy.footer': '更多隐私问题请发送邮件至 privacy@deepstudent.ai，我们会在 3 个工作日内回复。',

    'policy.terms.title': '使用条款',
    'policy.terms.description': '使用 DeepStudent 即表示你同意以下约定，本服务为学习辅助工具，不构成绝对学习结果承诺。',
    'policy.terms.section1.title': '服务内容',
    'policy.terms.section1.body': '我们提供错题整理、智能复习、AI 辅助等功能，能力会根据版本迭代持续更新。',
    'policy.terms.section1.point1': '测试功能可能存在不稳定，请按需体验。',
    'policy.terms.section1.point2': '我们保留随时调整或暂停服务的权利。',
    'policy.terms.section2.title': '用户责任',
    'policy.terms.section2.body': '你需确保上传内容拥有合法使用权，并对账号安全负责。若出现共享或泄露行为，请立即联系我们。',
    'policy.terms.section2.point1': '禁止利用 DeepStudent 传播违法或侵权内容。',
    'policy.terms.section2.point2': '若发现异常活动，我们可能采取限制措施。',
    'policy.terms.section3.title': '免责声明',
    'policy.terms.section3.body': '我们会尽力保证服务稳定，但因不可抗力或第三方原因导致的数据丢失、服务中断，我们不承担间接损失责任。',
    'policy.terms.section3.point1': '建议定期导出备份重要数据。',
    'policy.terms.section3.point2': '付费计划如需退款，请在 7 天内提交申请。',
    'policy.terms.footer': '使用本服务即视为同意上述条款。如有疑问请联系 support@deepstudent.ai。',
    
    // Policy
    'policy.understood': '我已了解',
    'policy.close': '关闭弹窗',
    
    // Theme
    'theme.system': '跟随系统',
    'theme.light': '浅色模式',
    'theme.dark': '深色模式',
    
    // Locale
    'locale.select': '语言',
    'locale.zh': '简体中文',
    'locale.zhHant': '繁體中文',
    'locale.en': 'English',
  },
  'zh-Hant': {
    // Nav
    'nav.features': '功能',
    'nav.docs': '文件',
    'nav.download': '下載',

    // Hero
    'hero.title': 'DeepStudent',
    'hero.subtitle': 'AI 原生的本地優先學習系統',
    'hero.tagline': '智慧對話、知識管理、Anki 製卡與全能閱讀器無縫融合，\n為你打造隱私安全、高度可擴展的終身學習工作台',
    'hero.cta.download': '立即下載',
    'hero.cta.explore': '了解更多',

    // Hero Preview
    'hero.preview.chat': '智慧對話',
    'hero.preview.skills': '技能系統',
    'hero.preview.knowledge': '學習資源',
    'hero.preview.providers': 'Anki 製卡',
    'hero.preview.selector': '介面預覽切換',
    'hero.preview.imageAlt': 'DeepStudent {label} 介面預覽',

    // Feature Tabs
    'featureTab.chat': '智慧對話',
    'featureTab.notes': '筆記',
    'featureTab.textbook': '教材',
    'featureTab.qbank': '題庫',
    'featureTab.essay': '作文',
    'featureTab.translate': '翻譯',
    'featureTab.mindmap': '導圖',
    'featureTab.skills': '技能系統',
    'featureTab.anki': 'Anki 製卡',
    'featureTab.privacy': '本地優先',
    
    // ========== 筆記系統 ==========
    'feature.notes.title': '筆記系統',
    'feature.notes.desc': 'Markdown 編輯器 + 版本歷史 + AI 輔助寫作。標籤分類、收藏管理，打造你的第二大腦。',
    'notes.markdown': 'Markdown 編輯',
    'notes.markdownDesc': '完整 Markdown 語法支援',
    'notes.version': '版本歷史',
    'notes.versionDesc': '多版本歷史，隨時回溯',
    'notes.ai': 'AI 輔助',
    'notes.aiDesc': 'AI 續寫與浮動助手',
    'notes.link': '筆記連結',
    'notes.linkDesc': '[[連結]] 語法筆記互聯',
    'notes.editor': 'Markdown 編輯器',
    'notes.sampleTitle': '線性代數學習筆記',
    'notes.sampleContent': '矩陣的特徵值與特徵向量...',
    'notes.autoSave': '已自動儲存',
    
    // ========== 教材管理 ==========
    'feature.textbook.title': '教材管理',
    'feature.textbook.desc': '支援 16+ 文檔格式，PDF/Word/EPUB 一鍵匯入。雙引擎 OCR 識別掃描件，匯入即自動向量化，AI 可讀可檢索。',
    'textbook.formats': '多格式支援',
    'textbook.formatsDesc': 'PDF、Word、EPUB、PPT 等 16+ 格式',
    'textbook.ocr': 'OCR 識別',
    'textbook.ocrDesc': 'DeepSeek + PaddleOCR 雙引擎',
    'textbook.reader': '閱讀器',
    'textbook.readerDesc': '內建 PDF/EPUB 閱讀器',
    'textbook.search': '語義搜尋',
    'textbook.searchDesc': '全文 + 向量檢索',
    'textbook.viewer': '教材閱讀器',
    'textbook.indexed': '已索引',
    
    // ========== 題目集/刷題 ==========
    'feature.qbank.title': '題目集 · 刷題系統',
    'feature.qbank.desc': '拍照識題 + AI 解答 + 8 種練習模式。支援順序/隨機/錯題優先/限時/模擬考試/每日一練，錯題本自動歸檔。',
    'qbank.ocr': '拍照識題',
    'qbank.ocrDesc': 'OCR 識別 + 題型分類',
    'qbank.modes': '練習模式',
    'qbank.modesDesc': '順序/隨機/錯題/限時/模擬/每日',
    'qbank.ai': 'AI 解答',
    'qbank.aiDesc': '自動呼叫對話分析解答',
    'qbank.stats': '統計分析',
    'qbank.statsDesc': '正確率、用時、知識點分佈',
    'qbank.daily': '每日一練',
    'qbank.dailyDesc': '智慧推薦 + 打卡日曆',
    'qbank.practiceMode': '練習模式',
    'qbank.randomPractice': '隨機練習',
    'qbank.currentQuestion': '當前進度',
    
    // ========== 作文批改 ==========
    'feature.essay.title': '作文批改',
    'feature.essay.desc': '串流批改 + 按考試標準多維評分 + 針對性修改建議。支援手寫作文 OCR 識別。',
    'essay.streaming': '串流批改',
    'essay.streamingDesc': '即時顯示批改結果',
    'essay.dimensions': '多維評分',
    'essay.dimensionsDesc': '按考試標準多維度評分',
    'essay.suggestions': '修改建議',
    'essay.suggestionsDesc': '針對性改進意見',
    'essay.ocr': '手寫識別',
    'essay.ocrDesc': '支援手寫作文圖片',
    'essay.grading': 'AI 批改中',
    'essay.grammar': '語法',
    'essay.structure': '結構',
    'essay.content': '內容',
    'essay.vocabulary': '詞彙',
    
    // ========== 翻譯工作台 ==========
    'feature.translate.title': '翻譯工作台',
    'feature.translate.desc': '支援 12 種語言互譯，雙欄同步滾動顯示。OCR 識別後翻譯、TTS 朗讀，一站式翻譯體驗。',
    'translate.languages': '多語言',
    'translate.languagesDesc': '中/英/日/韓/法/德等 11 種',
    'translate.compare': '雙欄視圖',
    'translate.compareDesc': '左右雙欄同步滾動',
    'translate.ocr': 'OCR 翻譯',
    'translate.ocrDesc': '圖片/文檔識別翻譯',
    'translate.tts': 'TTS 朗讀',
    'translate.ttsDesc': '文字轉語音',
    'translate.chinese': '中文',
    'translate.english': 'English',
    'translate.sampleSource': '深度學習是人工智慧的重要分支。',
    'translate.sampleTarget': 'Deep learning is a key branch of AI.',
    'translate.copy': '複製',
    
    // ========== 知識導圖 ==========
    'feature.mindmap.title': '知識導圖',
    'feature.mindmap.desc': '思維導圖、邏輯樹、組織架構圖等多種佈局。節點編輯、搜尋定位，匯出 OPML/Markdown/JSON/圖片。',
    'mindmap.layouts': '多種佈局',
    'mindmap.layoutsDesc': '思維導圖/邏輯樹/組織架構',
    'mindmap.export': '匯出格式',
    'mindmap.exportDesc': 'OPML/Markdown/JSON/PNG/SVG',
    'mindmap.style': '樣式自訂',
    'mindmap.styleDesc': '顏色、字型、連線',
    'mindmap.ai': 'AI 生成',
    'mindmap.aiDesc': '從文檔自動生成導圖',
    'mindmap.editor': '知識導圖編輯器',
    'mindmap.center': '中心主題',
    'mindmap.branch1': '分支 1',
    'mindmap.branch2': '分支 2',
    'mindmap.branch3': '分支 3',
    'mindmap.branch4': '分支 4',

    // Stats Highlight
    'stats.title': '為深度學習而生',
    'stats.subtitle': '漸進披露架構，工具按需載入，覆蓋學習全場景',
    'stats.tools': '內建工具',
    'stats.toolsDesc': '知識檢索、筆記、Anki、題庫等',
    'stats.providers': 'API 供應商',
    'stats.providersDesc': 'OpenAI、Claude、硅基流動等',
    'stats.modes': '練習模式',
    'stats.modesDesc': '順序、隨機、錯題優先等',
    'stats.formats': '文檔格式',
    'stats.formatsDesc': 'PDF、Word、EPUB 等',

    // Sub-features - 智慧對話
    'subfeature.chatBase': '基礎對話能力',
    'subfeature.chatBaseDesc': '多會話管理、串流回應、訊息操作',
    'subfeature.chatBase.d1': '多會話管理',
    'subfeature.chatBase.d2': '串流回應',
    'subfeature.chatBase.d3': '訊息編輯/重試',
    'subfeature.chatBase.d4': 'Token 估算',
    'subfeature.chatBase.d5': '會話回收站',
    'subfeature.chatBase.d6': '附件拖拽上傳',
    'subfeature.blocks': '區塊渲染外掛',
    'subfeature.blocksDesc': '16+ 種內容區塊類型，外掛化架構',
    'subfeature.blocks.d1': 'thinking 思維鏈',
    'subfeature.blocks.d2': 'rag 知識檢索',
    'subfeature.blocks.d3': 'webSearch 網路搜尋',
    'subfeature.blocks.d4': 'mcpTool 工具呼叫',
    'subfeature.blocks.d5': 'ankiCards 卡片生成',
    'subfeature.blocks.d6': 'imageGen 圖像生成 (開發中)',
    'subfeature.agentTools': 'Agent 工具調用',
    'subfeature.agentToolsDesc': '借助 Skills 工具組原生讀寫學習資料',
    'subfeature.agentTools.d1': '知識檢索工具組',
    'subfeature.agentTools.d2': '筆記讀寫工具組',
    'subfeature.agentTools.d3': '題庫操作工具組',
    'subfeature.agentTools.d4': 'Anki 製卡工具組',
    'subfeature.agentTools.d5': '記憶讀寫工具組',
    'subfeature.agentTools.d6': '資源訪問工具組',
    'subfeature.thinking': '推理模式',
    'subfeature.thinkingDesc': '支援 o1/DeepSeek-R1 等推理模型',
    'subfeature.thinking.d1': '思維鏈展示',
    'subfeature.thinking.d2': '可展開/摺疊',
    'subfeature.thinking.d3': '推理模型適配',
    'subfeature.multiModel': '多模型並行對比',
    'subfeature.multiModelDesc': '同時對比多個模型回答',
    'subfeature.multiModel.d1': '多模型選擇',
    'subfeature.multiModel.d2': '並行變體視圖',
    'subfeature.multiModel.d3': '功能開關',
    'subfeature.context': '上下文引用',
    'subfeature.contextDesc': '直接引用學習資源作為上下文',
    'subfeature.context.d1': '資源拖拽引用',
    'subfeature.context.d2': '來源面板',
    'subfeature.context.d3': '多來源類型',
    
    // Sub-features - 學習資源
    'subfeature.resourceTypes': '資源類型',
    'subfeature.resourceTypesDesc': '8 種資源類型統一管理',
    'subfeature.resourceTypes.d1': '筆記 nt_',
    'subfeature.resourceTypes.d2': '教材 tb_',
    'subfeature.resourceTypes.d3': '題目集 ex_',
    'subfeature.resourceTypes.d4': '作文 es_',
    'subfeature.resourceTypes.d5': '翻譯 tr_',
    'subfeature.resourceTypes.d6': '知識導圖 mm_',
    'subfeature.docFormats': '文檔格式',
    'subfeature.docFormatsDesc': '支援 16+ 種文檔格式',
    'subfeature.docFormats.d1': 'Word/Excel/PPT',
    'subfeature.docFormats.d2': 'PDF（文字+掃描）',
    'subfeature.docFormats.d3': 'EPUB 電子書',
    'subfeature.docFormats.d4': 'Markdown/HTML/TXT',
    'subfeature.ocr': 'OCR 引擎',
    'subfeature.ocrDesc': '雙引擎智慧識別',
    'subfeature.ocr.d1': 'DeepSeek OCR',
    'subfeature.ocr.d2': 'PaddleOCR-VL',
    'subfeature.vectorIndex': '向量化索引',
    'subfeature.vectorIndexDesc': '導入即自動向量化檢索',
    'subfeature.vectorIndex.d1': 'LanceDB 儲存',
    'subfeature.vectorIndex.d2': 'FTS 全文檢索',
    'subfeature.vectorIndex.d3': '批次處理',
    'subfeature.vectorIndex.d4': '失敗重試',
    'subfeature.vectorIndex.d5': '多維度嵌入',
    'subfeature.finder': '檔案管理',
    'subfeature.finderDesc': '訪達式檔案管理體驗',
    'subfeature.finder.d1': '桌面快捷方式',
    'subfeature.finder.d2': '收藏夾',
    'subfeature.finder.d3': '回收站',
    'subfeature.finder.d4': '全域搜尋',
    'subfeature.finder.d5': '批次操作',
    'subfeature.finder.d6': '多選移動刪除',
    
    // Sub-features - 技能系統
    'subfeature.instructionSkills': '指令型技能',
    'subfeature.instructionSkillsDesc': '改變 AI 行為模式的預設技能',
    'subfeature.instructionSkills.d1': '導師模式',
    'subfeature.instructionSkills.d2': '製卡模式',
    'subfeature.instructionSkills.d3': '文獻綜述',
    'subfeature.instructionSkills.d4': '調研模式',
    'subfeature.toolSkills': '工具組技能',
    'subfeature.toolSkillsDesc': '原生讀寫 VFS 學習資料的工具組',
    'subfeature.toolSkills.d1': '知識檢索 5 工具',
    'subfeature.toolSkills.d2': '畫布筆記 7 工具',
    'subfeature.toolSkills.d3': 'VFS 記憶 6 工具',
    'subfeature.toolSkills.d4': '學習資源 4 工具',
    'subfeature.toolSkills.d5': 'Anki 工具 6 工具',
    'subfeature.toolSkills.d6': '題庫工具 12 工具',
    'subfeature.builtinTools': '內建工具',
    'subfeature.builtinToolsDesc': '覆蓋學習全場景的工具集',
    'subfeature.builtinTools.d1': 'rag_search',
    'subfeature.builtinTools.d2': 'web_search',
    'subfeature.builtinTools.d3': 'note_*',
    'subfeature.builtinTools.d4': 'anki_*',
    'subfeature.builtinTools.d5': 'qbank_*',
    'subfeature.builtinTools.d6': 'workspace_*',
    'subfeature.customSkills': '自定義技能',
    'subfeature.customSkillsDesc': '使用者可建立自定義技能',
    'subfeature.customSkills.d1': '建立/編輯技能',
    'subfeature.customSkills.d2': '匯入/匯出',
    'subfeature.customSkills.d3': '專案級技能',
    'subfeature.mcp': 'MCP 服務',
    'subfeature.mcpDesc': '支援 MCP 協定工具整合',
    'subfeature.mcp.d1': 'SSE 傳輸',
    'subfeature.mcp.d2': 'WebSocket 傳輸',
    'subfeature.mcp.d3': 'Stdio 代理',
    'subfeature.mcp.d4': '自動重連',
    
    // Sub-features - Anki 製卡
    'subfeature.ankiParse': '文檔解析',
    'subfeature.ankiParseDesc': '支援 16+ 格式智慧解析',
    'subfeature.ankiParse.d1': '智慧分段',
    'subfeature.ankiParse.d2': '長文檔切割',
    'subfeature.ankiParse.d3': 'AI 知識點提取',
    'subfeature.template': '卡片模板',
    'subfeature.templateDesc': '多種預設 + 自定義模板',
    'subfeature.template.d1': '極簡卡片',
    'subfeature.template.d2': '程式設計卡片',
    'subfeature.template.d3': '選擇題卡片',
    'subfeature.template.d4': '填空題卡片',
    'subfeature.template.d5': '語言學習卡片',
    'subfeature.template.d6': '自定義 HTML/CSS',
    'subfeature.ankiTools': 'Anki 工具',
    'subfeature.ankiToolsDesc': '完整的製卡工具鏈',
    'subfeature.ankiTools.d1': 'anki_generate_cards',
    'subfeature.ankiTools.d2': 'anki_control_task',
    'subfeature.ankiTools.d3': 'anki_export_cards',
    'subfeature.ankiTools.d4': 'anki_list_templates',
    'subfeature.ankiTools.d5': 'anki_analyze_content',
    'subfeature.ankiTools.d6': 'anki_query_progress',
    'subfeature.ankiExport': '匯出同步',
    'subfeature.ankiExportDesc': 'APKG 匯出 + AnkiConnect',
    'subfeature.ankiExport.d1': 'APKG 標準匯出',
    'subfeature.ankiExport.d2': 'AnkiConnect 一鍵推送',
    'subfeature.preview3d': '卡片預覽',
    'subfeature.preview3dDesc': '3D 翻轉效果 + 斷點續傳',
    'subfeature.preview3d.d1': '3D 翻轉預覽',
    'subfeature.preview3d.d2': '暫停/恢復處理',
    'subfeature.preview3d.d3': '卡片編輯',
    
    // Sub-features - 本地優先
    'subfeature.databases': '資料庫實例',
    'subfeature.databasesDesc': '4 個本地資料庫實例',
    'subfeature.databases.d1': 'mistakes.db',
    'subfeature.databases.d2': 'chat_v2.db',
    'subfeature.databases.d3': 'vfs.db',
    'subfeature.databases.d4': 'llm_usage.db',
    'subfeature.chatTables': 'Chat 資料表',
    'subfeature.chatTablesDesc': '對話相關資料儲存',
    'subfeature.chatTables.d1': 'chat_v2_sessions',
    'subfeature.chatTables.d2': 'chat_v2_messages',
    'subfeature.chatTables.d3': 'chat_v2_blocks',
    'subfeature.chatTables.d4': 'chat_v2_attachments',
    'subfeature.chatTables.d5': 'workspace_index',
    'subfeature.chatTables.d6': 'subagent_task',
    'subfeature.vfsTables': 'VFS 資料表',
    'subfeature.vfsTablesDesc': '資源相關資料儲存',
    'subfeature.vfsTables.d1': 'resources',
    'subfeature.vfsTables.d2': 'notes/notes_versions',
    'subfeature.vfsTables.d3': 'exam_sheets',
    'subfeature.vfsTables.d4': 'questions',
    'subfeature.vfsTables.d5': 'vfs_index_*',
    'subfeature.vfsTables.d6': 'review_plans',
    'subfeature.backup': '分層備份',
    'subfeature.backupDesc': '4 級備份策略',
    'subfeature.backup.d1': 'Core (P0) 核心',
    'subfeature.backup.d2': 'Important (P1) 重要',
    'subfeature.backup.d3': 'Rebuildable (P2) 可重建',
    'subfeature.backup.d4': 'LargeAssets (P3) 大型資產',
    'subfeature.cloudSync': '雲端同步',
    'subfeature.cloudSyncDesc': '可選雲端同步方案',
    'subfeature.cloudSync.d1': 'WebDAV 同步',
    'subfeature.cloudSync.d2': 'S3 物件儲存',

    // Features
    'feature.review.title': '智慧對話 · Agent 化',
    'feature.review.desc': '借助技能系統的工具組，AI 可原生檢索、閱讀、編輯 VFS 中的學習資料——筆記、教材、題目、翻譯、作文。真正實現 AI 與學習資料的深度融合。',
    'feature.organize.title': '學習資源中心',
    'feature.organize.desc': '訪達式管理所有學習資源——筆記、教材、題目集、翻譯、作文、知識導圖。統一儲存在 VFS，Chat AI 可透過工具組原生檢索、閱讀、編輯。',
    'feature.compare.title': '技能系統 · 按需擴展',
    'feature.compare.desc': '漸進披露架構，工具按需載入。內建導師模式、製卡助手、文獻綜述、調研模式等技能，支援自定義與 MCP 生態整合。',
    'feature.spaced.title': 'Anki 智慧製卡',
    'feature.spaced.desc': '從學習文檔智慧分段生成卡片。支援多模板、3D 預覽、AnkiConnect 一鍵同步，讓間隔重複觸手可及。',
    'feature.knowledge.title': '本地優先 · 隱私安全',
    'feature.knowledge.desc': '所有資料儲存在本地：SQLite 元資料 + LanceDB 向量庫。支援完整備份與稽核，你的學習記錄完全由你掌控。',

    // Cards
    'card.analyzing': '深度分析中',
    'card.justNow': '剛剛',
    'card.mastery': '知識點掌握',
    'card.suggestion': '建議：',
    'card.myNotebook': '我的錯題本',
    'card.errorType': '錯誤類型',
    'card.calcError': '計算錯誤',
    'card.frequency': '頻次',
    'card.high': '高',
    'card.question': '題目',
    'card.clickAnswer': '點擊查看答案',
    'card.backToQuestion': '返回題目',
    'card.reference': '參考：第 4 章',
    'card.suggestionPrefix': '重新複習',
    'card.suggestionTopic': '導數定義',
    'card.suggestionSuffix': '相關章節，並加強基礎計算訓練。',
    'card.calcErrorTip': '建議在進行複雜運算時，增加驗算步驟，特別是符號變換環節。',
    'card.chatQuestion': '這道題選 C 的原因是什麼？',
    'card.chatAnswerSnippet': '根據洛必達法則，當 x 趨近於 0 時，分子分母同時求導...',

    // Notebook sample
    'notebook.item.calculusFinal': '2023 高數期末',
    'notebook.item.reading': '英語閱讀理解專項',
    'notebook.item.mechanics': '物理力學錯題集',
    'subject.math': '數學',
    'subject.english': '英語',
    'subject.physics': '物理',
    'time.today': '今天',
    'time.yesterday': '昨天',
    'time.twoDaysAgo': '2 天前',

    // Flashcard
    'flashcard.prompt': 'ln(x) 的導數是什麼？',

    // Download
    'download.title': '下載 DeepStudent',
    'download.subtitle': '選擇你的平台，安裝後即可開始整理。',
    'download.selectPlatform': '選擇平台',
    'download.backHome': '返回首頁',
    'download.dmgInstall': 'DMG 安裝',
    'download.preview': '預覽版',
    'download.version': '版本',
    'download.size': '大小',
    'download.system': '系統',
    'download.downloadDmg': '下載 DMG',
    'download.downloadExe': '下載 EXE',
    'download.requirements.macos': 'macOS 13+，Apple Silicon 優化',
    'download.requirements.windows': 'Windows 11 / 10 22H2+',
    'download.description.macos': '選單列快捷輸入，支援 Spotlight 搜尋。',
    'download.description.windows': '預覽版含 OneNote 匯入與系統托盤控制項。',
    'download.note.windowsPreview': 'Windows 仍為預覽版，如需協助請聯絡 support@deepstudent.ai。',

    // FAQ
    'faq.title': '常見問題',
    'faq.subtitle': '關於 DeepStudent 的常見疑問解答',
    'faq.openSource.q': 'DeepStudent 是開源的嗎？',
    'faq.openSource.a': '是的，DeepStudent 完全開源。你可以在 GitHub 查看原始碼並參與共建。',
    'faq.openSource.link': '前往 GitHub',
    'faq.privacy.q': '我的資料會被如何使用？',
    'faq.privacy.a': '我們遵循最小化資料原則，資料僅用於生成個人化學習建議與統計分析。',
    'faq.privacy.action': '查看隱私政策',
    'faq.macosQuarantine.q': 'macOS 安裝後提示「已損壞，無法打開」怎麼辦？',
    'faq.macosQuarantine.a': '可以在終端執行以下命令（把 <應用路徑> 替換為你的應用路徑；也可以把應用圖示拖進終端自動填充路徑）：',
    'faq.macosQuarantine.code': 'sudo xattr -r -d com.apple.quarantine <應用路徑>',
    'faq.macosQuarantine.link': '查看完整步驟',
    'faq.windowsPreview.q': 'Windows 版本是正式版嗎？',
    'faq.windowsPreview.a': '目前 Windows 仍為預覽版，我們會持續迭代。遇到問題可聯絡 support@deepstudent.ai。',

    // Footer
    'footer.privacy': '隱私',
    'footer.about': '關於',
    'footer.terms': '條款',
    'footer.xiaohongshu': '小紅書',
    
    // Policy Content
    'policy.about.title': '關於 DeepStudent',
    'policy.about.description': '一款面向學生與自學者的開源錯題管理與複盤工具，幫助你建立長期可持續的學習系統。',
    'policy.about.section1.title': '核心理念',
    'policy.about.section1.body': '構建完全 AI 原生的學習閉環，解決碎片化學習痛點。',
    'policy.about.section1.point1': '虛擬檔案系統 VFS 作為所有學習資源的單一資料源，AI 可讀可檢索。',
    'policy.about.section1.point2': '本地優先，資料安全可控，支援完整稽核與備份。',
    'policy.about.section1.point3': 'Chat AI 透過 Skills 工具組原生檢索、閱讀、編輯所有子應用資料。',
    'policy.about.section2.title': '開源與共建',
    'policy.about.section2.body': 'DeepStudent 完全開源，歡迎提交 Issue 與 PR，共同改進學習體驗。',
    'policy.about.section2.point1': '保持透明的開發節奏與版本發布記錄。',
    'policy.about.section2.point2': '持續吸收社群的真實需求回饋。',
    'policy.about.section3.title': '聯絡我們',
    'policy.about.section3.body': '合作或建議請發送郵件至 team@deepstudent.ai，我們會盡快回覆。',
    'policy.about.footer': '感謝你與我們一起打造更聰明、更高效的學習方式。',

    'policy.privacy.title': '隱私政策',
    'policy.privacy.description': '我們遵循最小化資料原則，確保每條學習記錄都掌握在你手中。',
    'policy.privacy.section1.title': '收集範圍',
    'policy.privacy.section1.body': '僅在你使用 DeepStudent 時記錄必要的錯題內容、標籤與複習進度，不會採集與服務無關的敏感個人資訊。',
    'policy.privacy.section1.point1': '帳號資訊僅用於雲端同步與登入驗證。',
    'policy.privacy.section1.point2': '你可隨時匯出或刪除本地與雲端資料。',
    'policy.privacy.section2.title': '使用方式',
    'policy.privacy.section2.body': '所有資料僅用於生成個人化學習建議與統計分析，不會出售或提供給第三方廣告平台。',
    'policy.privacy.section2.point1': '統計分析僅使用匿名化、去識別後的彙總資料。',
    'policy.privacy.section2.point2': '我們會定期發布透明度報告。',
    'policy.privacy.section3.title': '安全措施',
    'policy.privacy.section3.body': '所有傳輸均使用 TLS 加密，雲端儲存採用分區隔離，敏感欄位在資料庫內加鹽雜湊。',
    'policy.privacy.section3.point1': '核心基礎設施通過 ISO/IEC 27001 安全認證。',
    'policy.privacy.section3.point2': '如遇異常存取會立即告警並支援一鍵凍結帳號。',
    'policy.privacy.footer': '更多隱私問題請發送郵件至 privacy@deepstudent.ai，我們會在 3 個工作日內回覆。',

    'policy.terms.title': '使用條款',
    'policy.terms.description': '使用 DeepStudent 即表示你同意以下約定，本服務為學習輔助工具，不構成絕對學習結果承諾。',
    'policy.terms.section1.title': '服務內容',
    'policy.terms.section1.body': '我們提供錯題整理、智慧複習、AI 輔助等功能，能力會根據版本迭代持續更新。',
    'policy.terms.section1.point1': '測試功能可能存在不穩定，請按需體驗。',
    'policy.terms.section1.point2': '我們保留隨時調整或暫停服務的權利。',
    'policy.terms.section2.title': '使用者責任',
    'policy.terms.section2.body': '你需確保上傳內容擁有合法使用權，並對帳號安全負責。若出現共享或洩露行為，請立即聯絡我們。',
    'policy.terms.section2.point1': '禁止利用 DeepStudent 傳播違法或侵權內容。',
    'policy.terms.section2.point2': '若發現異常活動，我們可能採取限制措施。',
    'policy.terms.section3.title': '免責聲明',
    'policy.terms.section3.body': '我們會盡力確保服務穩定，但因不可抗力或第三方原因導致的資料遺失、服務中斷，我們不承擔間接損失責任。',
    'policy.terms.section3.point1': '建議定期匯出備份重要資料。',
    'policy.terms.section3.point2': '付費方案如需退款，請在 7 天內提交申請。',
    'policy.terms.footer': '使用本服務即視為同意上述條款。如有疑問請聯絡 support@deepstudent.ai。',

    // Policy
    'policy.understood': '我已瞭解',
    'policy.close': '關閉彈窗',

    // Theme
    'theme.system': '跟隨系統',
    'theme.light': '淺色模式',
    'theme.dark': '深色模式',

    // Locale
    'locale.select': '語言',
    'locale.zh': '簡體中文',
    'locale.zhHant': '繁體中文',
    'locale.en': 'English',
  },
  en: {
    // Nav
    'nav.features': 'Features',
    'nav.docs': 'Docs',
    'nav.download': 'Download',
    
    // Hero
    'hero.title': 'DeepStudent',
    'hero.subtitle': 'AI-Native Local-First Learning System',
    'hero.tagline': 'Seamlessly integrates AI chat, knowledge management, Anki card generation, and universal reader.\nA privacy-first, extensible lifelong learning workbench',
    'hero.cta.download': 'Download',
    'hero.cta.explore': 'Learn More',

    // Hero Preview
    'hero.preview.chat': 'AI Chat',
    'hero.preview.skills': 'Skills',
    'hero.preview.knowledge': 'Learning Hub',
    'hero.preview.providers': 'CardForge',
    'hero.preview.selector': 'Preview selector',
    'hero.preview.imageAlt': 'DeepStudent {label} preview',
    
    // Feature Tabs
    'featureTab.chat': 'AI Chat',
    'featureTab.notes': 'Notes',
    'featureTab.textbook': 'Textbook',
    'featureTab.qbank': 'Q-Bank',
    'featureTab.essay': 'Essay',
    'featureTab.translate': 'Translate',
    'featureTab.mindmap': 'Mindmap',
    'featureTab.skills': 'Skills',
    'featureTab.anki': 'CardForge',
    'featureTab.privacy': 'Local-First',
    
    // ========== Notes System ==========
    'feature.notes.title': 'Notes System',
    'feature.notes.desc': 'Markdown editor + version history + AI writing assistant. Tag organization, favorites, build your second brain.',
    'notes.markdown': 'Markdown Editor',
    'notes.markdownDesc': 'Full Markdown syntax support',
    'notes.version': 'Version History',
    'notes.versionDesc': 'Multi-version history, instant rollback',
    'notes.ai': 'AI Assistant',
    'notes.aiDesc': 'AI continue & floating assistant',
    'notes.link': 'Tag Organization',
    'notes.linkDesc': 'Multi-tag categorization',
    'notes.editor': 'Markdown Editor',
    'notes.sampleTitle': 'Linear Algebra Notes',
    'notes.sampleContent': 'Eigenvalues and eigenvectors of matrices...',
    'notes.autoSave': 'Auto-saved',
    
    // ========== Textbook Management ==========
    'feature.textbook.title': 'Textbook Management',
    'feature.textbook.desc': 'Supports 16+ document formats, one-click import PDF/Word/EPUB. Dual OCR engine for scans, auto-vectorize on import, AI-readable & searchable.',
    'textbook.formats': 'Multi-format',
    'textbook.formatsDesc': 'PDF, Word, EPUB, PPT & 16+ formats',
    'textbook.ocr': 'OCR Recognition',
    'textbook.ocrDesc': 'DeepSeek + PaddleOCR dual engine',
    'textbook.reader': 'Reader',
    'textbook.readerDesc': 'Built-in PDF/EPUB reader',
    'textbook.search': 'Semantic Search',
    'textbook.searchDesc': 'Full-text + vector search',
    'textbook.viewer': 'Textbook Viewer',
    'textbook.indexed': 'Indexed',
    
    // ========== Q-Bank / Practice ==========
    'feature.qbank.title': 'Q-Bank · Practice System',
    'feature.qbank.desc': 'Photo-to-question + AI solving + 8 practice modes. Sequential/random/mistakes-first/timed/mock exam/daily practice, auto-archive wrong answers.',
    'qbank.ocr': 'Photo Recognition',
    'qbank.ocrDesc': 'OCR + question type classification',
    'qbank.modes': 'Practice Modes',
    'qbank.modesDesc': 'Sequential/random/mistakes/timed/mock/daily',
    'qbank.ai': 'AI Solving',
    'qbank.aiDesc': 'Auto-invoke chat for analysis',
    'qbank.stats': 'Statistics',
    'qbank.statsDesc': 'Accuracy, time, knowledge distribution',
    'qbank.daily': 'Daily Practice',
    'qbank.dailyDesc': 'Smart recommendations + streak calendar',
    'qbank.practiceMode': 'Practice Mode',
    'qbank.randomPractice': 'Random Practice',
    'qbank.currentQuestion': 'Current Progress',
    
    // ========== Essay Grading ==========
    'feature.essay.title': 'Essay Grading',
    'feature.essay.desc': 'Streaming feedback + multi-dimensional scoring by exam standards + targeted suggestions. Supports handwritten essay OCR.',
    'essay.streaming': 'Streaming Feedback',
    'essay.streamingDesc': 'Real-time grading results',
    'essay.dimensions': 'Multi-dimensional',
    'essay.dimensionsDesc': 'Scoring based on exam standards',
    'essay.suggestions': 'Suggestions',
    'essay.suggestionsDesc': 'Targeted improvement advice',
    'essay.ocr': 'Handwriting OCR',
    'essay.ocrDesc': 'Supports handwritten essay images',
    'essay.grading': 'AI Grading',
    'essay.grammar': 'Grammar',
    'essay.structure': 'Structure',
    'essay.content': 'Content',
    'essay.vocabulary': 'Vocabulary',
    
    // ========== Translation Workbench ==========
    'feature.translate.title': 'Translation Workbench',
    'feature.translate.desc': 'Supports 12 languages with dual-pane sync scroll. OCR-then-translate, TTS - all-in-one translation experience.',
    'translate.languages': 'Multi-language',
    'translate.languagesDesc': 'EN/CN/JP/KR/FR/DE & 11 more',
    'translate.compare': 'Dual-pane View',
    'translate.compareDesc': 'Side-by-side with sync scroll',
    'translate.ocr': 'OCR Translate',
    'translate.ocrDesc': 'Image/document OCR translation',
    'translate.tts': 'TTS',
    'translate.ttsDesc': 'Text-to-speech',
    'translate.chinese': '中文',
    'translate.english': 'English',
    'translate.sampleSource': 'Deep learning is a key branch of AI.',
    'translate.sampleTarget': '深度学习是人工智能的重要分支。',
    'translate.copy': 'Copy',
    
    // ========== Knowledge Mindmap ==========
    'feature.mindmap.title': 'Knowledge Mindmap',
    'feature.mindmap.desc': 'Mind map, logic tree, org chart & more layouts. Node editing, search & locate, export to OPML/Markdown/JSON/PNG.',
    'mindmap.layouts': 'Multiple Layouts',
    'mindmap.layoutsDesc': 'Mind map/logic tree/org chart',
    'mindmap.export': 'Export Formats',
    'mindmap.exportDesc': 'OPML/Markdown/JSON/PNG/SVG',
    'mindmap.style': 'Custom Styles',
    'mindmap.styleDesc': 'Colors, fonts, connectors',
    'mindmap.ai': 'AI Generation',
    'mindmap.aiDesc': 'Auto-generate from documents',
    'mindmap.editor': 'Mindmap Editor',
    'mindmap.center': 'Central Topic',
    'mindmap.branch1': 'Branch 1',
    'mindmap.branch2': 'Branch 2',
    'mindmap.branch3': 'Branch 3',
    'mindmap.branch4': 'Branch 4',

    // Stats Highlight
    'stats.title': 'Built for Deep Learning',
    'stats.subtitle': 'Progressive disclosure architecture with on-demand tool loading',
    'stats.tools': 'Built-in Tools',
    'stats.toolsDesc': 'RAG, notes, Anki, Q-bank & more',
    'stats.providers': 'API Providers',
    'stats.providersDesc': 'OpenAI, Claude, SiliconFlow & more',
    'stats.modes': 'Practice Modes',
    'stats.modesDesc': 'Sequential, random, mistakes-first & more',
    'stats.formats': 'Doc Formats',
    'stats.formatsDesc': 'PDF, Word, EPUB & more',

    // Sub-features - AI Chat
    'subfeature.chatBase': 'Core Chat',
    'subfeature.chatBaseDesc': 'Multi-session, streaming, message ops',
    'subfeature.chatBase.d1': 'Multi-session',
    'subfeature.chatBase.d2': 'Streaming',
    'subfeature.chatBase.d3': 'Edit/Retry',
    'subfeature.chatBase.d4': 'Token estimate',
    'subfeature.chatBase.d5': 'Trash bin',
    'subfeature.chatBase.d6': 'Drag-drop upload',
    'subfeature.blocks': 'Block Plugins',
    'subfeature.blocksDesc': '16+ content block types, plugin arch',
    'subfeature.blocks.d1': 'thinking chain',
    'subfeature.blocks.d2': 'rag retrieval',
    'subfeature.blocks.d3': 'webSearch',
    'subfeature.blocks.d4': 'mcpTool',
    'subfeature.blocks.d5': 'ankiCards',
    'subfeature.blocks.d6': 'imageGen (WIP)',
    'subfeature.agentTools': 'Agent Tool Calls',
    'subfeature.agentToolsDesc': 'Native read/write learning data via Skills toolset',
    'subfeature.agentTools.d1': 'Knowledge retrieval tools',
    'subfeature.agentTools.d2': 'Note read/write tools',
    'subfeature.agentTools.d3': 'Q-bank operation tools',
    'subfeature.agentTools.d4': 'Anki cardforge tools',
    'subfeature.agentTools.d5': 'Memory read/write tools',
    'subfeature.agentTools.d6': 'Resource access tools',
    'subfeature.thinking': 'Reasoning Mode',
    'subfeature.thinkingDesc': 'Supports o1/DeepSeek-R1 reasoning',
    'subfeature.thinking.d1': 'Chain-of-thought',
    'subfeature.thinking.d2': 'Expand/collapse',
    'subfeature.thinking.d3': 'Model adaption',
    'subfeature.multiModel': 'Multi-Model Compare',
    'subfeature.multiModelDesc': 'Compare multiple model responses',
    'subfeature.multiModel.d1': 'Multi-model select',
    'subfeature.multiModel.d2': 'Parallel variants',
    'subfeature.multiModel.d3': 'Feature toggle',
    'subfeature.context': 'Context Reference',
    'subfeature.contextDesc': 'Reference resources as context',
    'subfeature.context.d1': 'Drag-drop reference',
    'subfeature.context.d2': 'Source panel',
    'subfeature.context.d3': 'Multi-source types',
    
    // Sub-features - Learning Hub
    'subfeature.resourceTypes': 'Resource Types',
    'subfeature.resourceTypesDesc': '8 resource types unified',
    'subfeature.resourceTypes.d1': 'Notes nt_',
    'subfeature.resourceTypes.d2': 'Textbooks tb_',
    'subfeature.resourceTypes.d3': 'Problem sets ex_',
    'subfeature.resourceTypes.d4': 'Essays es_',
    'subfeature.resourceTypes.d5': 'Translations tr_',
    'subfeature.resourceTypes.d6': 'Mindmaps mm_',
    'subfeature.docFormats': 'Doc Formats',
    'subfeature.docFormatsDesc': '16+ document formats supported',
    'subfeature.docFormats.d1': 'Word/Excel/PPT',
    'subfeature.docFormats.d2': 'PDF (text+scanned)',
    'subfeature.docFormats.d3': 'EPUB ebooks',
    'subfeature.docFormats.d4': 'Markdown/HTML/TXT',
    'subfeature.ocr': 'OCR Engines',
    'subfeature.ocrDesc': 'Dual-engine smart recognition',
    'subfeature.ocr.d1': 'DeepSeek OCR',
    'subfeature.ocr.d2': 'PaddleOCR-VL',
    'subfeature.vectorIndex': 'Vector Index',
    'subfeature.vectorIndexDesc': 'Auto-vectorize on import',
    'subfeature.vectorIndex.d1': 'LanceDB store',
    'subfeature.vectorIndex.d2': 'FTS full-text',
    'subfeature.vectorIndex.d3': 'Batch processing',
    'subfeature.vectorIndex.d4': 'Retry on failure',
    'subfeature.vectorIndex.d5': 'Multi-dim embedding',
    'subfeature.finder': 'File Manager',
    'subfeature.finderDesc': 'Finder-style file management',
    'subfeature.finder.d1': 'Desktop shortcuts',
    'subfeature.finder.d2': 'Favorites',
    'subfeature.finder.d3': 'Trash bin',
    'subfeature.finder.d4': 'Global search',
    'subfeature.finder.d5': 'Batch ops',
    'subfeature.finder.d6': 'Multi-select',
    
    // Sub-features - Skills
    'subfeature.instructionSkills': 'Instruction Skills',
    'subfeature.instructionSkillsDesc': 'Preconfigured AI behavior modes',
    'subfeature.instructionSkills.d1': 'Tutor mode',
    'subfeature.instructionSkills.d2': 'Card forge mode',
    'subfeature.instructionSkills.d3': 'Literature review',
    'subfeature.instructionSkills.d4': 'Research mode',
    'subfeature.toolSkills': 'Tool Groups',
    'subfeature.toolSkillsDesc': 'Native read/write VFS learning data',
    'subfeature.toolSkills.d1': 'Knowledge 5 tools',
    'subfeature.toolSkills.d2': 'Canvas 7 tools',
    'subfeature.toolSkills.d3': 'VFS memory 6 tools',
    'subfeature.toolSkills.d4': 'Resource 4 tools',
    'subfeature.toolSkills.d5': 'Anki 6 tools',
    'subfeature.toolSkills.d6': 'Q-bank 12 tools',
    'subfeature.builtinTools': 'Built-in Tools',
    'subfeature.builtinToolsDesc': 'Full learning scenario coverage',
    'subfeature.builtinTools.d1': 'rag_search',
    'subfeature.builtinTools.d2': 'web_search',
    'subfeature.builtinTools.d3': 'note_*',
    'subfeature.builtinTools.d4': 'anki_*',
    'subfeature.builtinTools.d5': 'qbank_*',
    'subfeature.builtinTools.d6': 'workspace_*',
    'subfeature.customSkills': 'Custom Skills',
    'subfeature.customSkillsDesc': 'Create your own skills',
    'subfeature.customSkills.d1': 'Create/edit skills',
    'subfeature.customSkills.d2': 'Import/export',
    'subfeature.customSkills.d3': 'Project-level skills',
    'subfeature.mcp': 'MCP Service',
    'subfeature.mcpDesc': 'MCP protocol tool integration',
    'subfeature.mcp.d1': 'SSE transport',
    'subfeature.mcp.d2': 'WebSocket transport',
    'subfeature.mcp.d3': 'Stdio proxy',
    'subfeature.mcp.d4': 'Auto-reconnect',
    
    // Sub-features - CardForge
    'subfeature.ankiParse': 'Doc Parsing',
    'subfeature.ankiParseDesc': '16+ formats smart parsing',
    'subfeature.ankiParse.d1': 'Smart chunking',
    'subfeature.ankiParse.d2': 'Long doc splitting',
    'subfeature.ankiParse.d3': 'AI knowledge extraction',
    'subfeature.template': 'Card Templates',
    'subfeature.templateDesc': 'Presets + custom templates',
    'subfeature.template.d1': 'Minimal card',
    'subfeature.template.d2': 'Code card',
    'subfeature.template.d3': 'Multiple choice',
    'subfeature.template.d4': 'Cloze card',
    'subfeature.template.d5': 'Language learning',
    'subfeature.template.d6': 'Custom HTML/CSS',
    'subfeature.ankiTools': 'Anki Tools',
    'subfeature.ankiToolsDesc': 'Complete card forge toolchain',
    'subfeature.ankiTools.d1': 'anki_generate_cards',
    'subfeature.ankiTools.d2': 'anki_control_task',
    'subfeature.ankiTools.d3': 'anki_export_cards',
    'subfeature.ankiTools.d4': 'anki_list_templates',
    'subfeature.ankiTools.d5': 'anki_analyze_content',
    'subfeature.ankiTools.d6': 'anki_query_progress',
    'subfeature.ankiExport': 'Export & Sync',
    'subfeature.ankiExportDesc': 'APKG export + AnkiConnect',
    'subfeature.ankiExport.d1': 'APKG standard export',
    'subfeature.ankiExport.d2': 'AnkiConnect one-click',
    'subfeature.preview3d': 'Card Preview',
    'subfeature.preview3dDesc': '3D flip + resumable processing',
    'subfeature.preview3d.d1': '3D flip preview',
    'subfeature.preview3d.d2': 'Pause/resume',
    'subfeature.preview3d.d3': 'Card editing',
    
    // Sub-features - Local-First
    'subfeature.databases': 'Database Instances',
    'subfeature.databasesDesc': '4 local database instances',
    'subfeature.databases.d1': 'mistakes.db',
    'subfeature.databases.d2': 'chat_v2.db',
    'subfeature.databases.d3': 'vfs.db',
    'subfeature.databases.d4': 'llm_usage.db',
    'subfeature.chatTables': 'Chat Tables',
    'subfeature.chatTablesDesc': 'Conversation data storage',
    'subfeature.chatTables.d1': 'chat_v2_sessions',
    'subfeature.chatTables.d2': 'chat_v2_messages',
    'subfeature.chatTables.d3': 'chat_v2_blocks',
    'subfeature.chatTables.d4': 'chat_v2_attachments',
    'subfeature.chatTables.d5': 'workspace_index',
    'subfeature.chatTables.d6': 'subagent_task',
    'subfeature.vfsTables': 'VFS Tables',
    'subfeature.vfsTablesDesc': 'Resource data storage',
    'subfeature.vfsTables.d1': 'resources',
    'subfeature.vfsTables.d2': 'notes/notes_versions',
    'subfeature.vfsTables.d3': 'exam_sheets',
    'subfeature.vfsTables.d4': 'questions',
    'subfeature.vfsTables.d5': 'vfs_index_*',
    'subfeature.vfsTables.d6': 'review_plans',
    'subfeature.backup': 'Tiered Backup',
    'subfeature.backupDesc': '4-tier backup strategy',
    'subfeature.backup.d1': 'Core (P0)',
    'subfeature.backup.d2': 'Important (P1)',
    'subfeature.backup.d3': 'Rebuildable (P2)',
    'subfeature.backup.d4': 'LargeAssets (P3)',
    'subfeature.cloudSync': 'Cloud Sync',
    'subfeature.cloudSyncDesc': 'Optional cloud sync options',
    'subfeature.cloudSync.d1': 'WebDAV sync',
    'subfeature.cloudSync.d2': 'S3 object storage',

    // Features
    'feature.review.title': 'AI Chat · Agentic',
    'feature.review.desc': 'Via Skills toolset, AI can natively retrieve, read, and edit learning data in VFS — notes, textbooks, questions, translations, essays. True deep integration between AI and your learning data.',
    'feature.organize.title': 'Learning Hub',
    'feature.organize.desc': 'Finder-style management for all learning resources — notes, textbooks, problem sets, translations, essays, mind maps. Unified in VFS, Chat AI can natively retrieve, read, and edit via toolset.',
    'feature.compare.title': 'Skills · On-Demand Extension',
    'feature.compare.desc': 'Progressive disclosure architecture with on-demand tool loading. Built-in tutor mode, card forge, literature review, research mode, and more. Supports custom skills and MCP ecosystem integration.',
    'feature.spaced.title': 'Anki CardForge',
    'feature.spaced.desc': 'Intelligently segment documents to generate cards. Multi-template support, 3D preview, one-click AnkiConnect sync — spaced repetition at your fingertips.',
    'feature.knowledge.title': 'Local-First · Privacy Safe',
    'feature.knowledge.desc': 'All data stored locally: SQLite metadata + LanceDB vector store. Full backup and audit support — your learning records stay under your control.',
    
    // Cards
    'card.analyzing': 'Deep Analyzing',
    'card.justNow': 'Just now',
    'card.mastery': 'Knowledge Mastery',
    'card.suggestion': 'Suggestion:',
    'card.myNotebook': 'My Mistake Notebook',
    'card.errorType': 'Error Type',
    'card.calcError': 'Calculation Error',
    'card.frequency': 'Frequency',
    'card.high': 'High',
    'card.question': 'Question',
    'card.clickAnswer': 'Click to reveal answer',
    'card.backToQuestion': 'Back to question',
    'card.reference': 'Reference: Chapter 4',
    'card.suggestionPrefix': 'Review the',
    'card.suggestionTopic': 'definition of derivatives',
    'card.suggestionSuffix': 'and strengthen basic calculation skills.',
    'card.calcErrorTip': 'Tip: Add quick verification steps for complex calculations, especially sign changes.',
    'card.chatQuestion': 'Why is the answer C?',
    'card.chatAnswerSnippet': "By L'Hopital's rule, as x approaches 0, differentiate the numerator and denominator...",

    // Notebook sample
    'notebook.item.calculusFinal': 'Calculus Final 2023',
    'notebook.item.reading': 'Reading Comprehension Practice',
    'notebook.item.mechanics': 'Mechanics Mistakes',
    'subject.math': 'Math',
    'subject.english': 'English',
    'subject.physics': 'Physics',
    'time.today': 'Today',
    'time.yesterday': 'Yesterday',
    'time.twoDaysAgo': '2 days ago',

    // Flashcard
    'flashcard.prompt': 'What is the derivative of ln(x)?',
    
    // Download
    'download.title': 'Download DeepStudent',
    'download.subtitle': 'Choose your platform and start organizing.',
    'download.selectPlatform': 'Select Platform',
    'download.backHome': 'Back to Home',
    'download.dmgInstall': 'DMG Install',
    'download.preview': 'Preview',
    'download.version': 'Version',
    'download.size': 'Size',
    'download.system': 'System',
    'download.downloadDmg': 'Download DMG',
    'download.downloadExe': 'Download EXE',
    'download.requirements.macos': 'macOS 13+, Apple Silicon optimized',
    'download.requirements.windows': 'Windows 11 / 10 22H2+',
    'download.description.macos': 'Menu bar quick entry, Spotlight search support.',
    'download.description.windows': 'Preview includes OneNote import and system tray controls.',
    'download.note.windowsPreview': 'Windows is still in preview. If you need help, contact support@deepstudent.ai.',
    
    // FAQ
    'faq.title': 'FAQ',
    'faq.subtitle': 'Common questions about DeepStudent',
    'faq.openSource.q': 'Is DeepStudent open source?',
    'faq.openSource.a': 'Yes. DeepStudent is licensed under AGPL-3.0 and fully open source. You can view the code, submit issues, or contribute on GitHub.',
    'faq.openSource.link': 'Open GitHub',
    'faq.privacy.q': 'Where is my data stored?',
    'faq.privacy.a': 'DeepStudent is a local-first app. All data (SQLite metadata + LanceDB vector store + blob files) is stored on your device, with full backup and audit support.',
    'faq.privacy.action': 'View Privacy Policy',
    'faq.macosQuarantine.q': 'macOS says the app is "damaged". What should I do?',
    'faq.macosQuarantine.a': 'Run the following command in Terminal (replace <App Path> with your app path; you can also drag the app into Terminal to auto-fill the path):',
    'faq.macosQuarantine.code': 'sudo xattr -r -d com.apple.quarantine <App Path>',
    'faq.macosQuarantine.link': 'See full steps',
    'faq.windowsPreview.q': 'How do I configure AI models?',
    'faq.windowsPreview.a': 'Go to Settings → API Configuration and add your AI provider API key (OpenAI, Anthropic, SiliconFlow, etc.). We recommend using SiliconFlow\'s "Quick Setup" for the fastest configuration.',
    
    // Footer
    'footer.privacy': 'Privacy',
    'footer.about': 'About',
    'footer.terms': 'Terms',
    'footer.xiaohongshu': 'Xiaohongshu',
    
    // Policy Content
    'policy.about.title': 'About DeepStudent',
    'policy.about.description': 'An open-source mistake tracking and review tool for students and self-learners, built for long-term, sustainable learning.',
    'policy.about.section1.title': 'Core Philosophy',
    'policy.about.section1.body': 'Build a fully AI-native learning loop, solving fragmented learning pain points.',
    'policy.about.section1.point1': 'VFS as single source of truth for all learning resources, AI-readable and searchable.',
    'policy.about.section1.point2': 'Local-first, secure data control with full audit and backup support.',
    'policy.about.section1.point3': 'Chat AI natively retrieves, reads, and edits all sub-app data via Skills toolset.',
    'policy.about.section2.title': 'Open source & community',
    'policy.about.section2.body': 'DeepStudent is fully open source. Issues and pull requests are welcome.',
    'policy.about.section2.point1': 'Transparent development and release history.',
    'policy.about.section2.point2': 'Continuously shaped by real community feedback.',
    'policy.about.section3.title': 'Contact',
    'policy.about.section3.body': "For collaboration or suggestions, email team@deepstudent.ai. We'll get back to you soon.",
    'policy.about.footer': 'Thanks for building a smarter, more efficient way to learn with us.',

    'policy.privacy.title': 'Privacy Policy',
    'policy.privacy.description': 'We follow data minimization. Your learning records stay under your control.',
    'policy.privacy.section1.title': 'What we collect',
    'policy.privacy.section1.body': "We only store the mistake content, tags, and review progress needed for the product. We don't collect unrelated sensitive personal data.",
    'policy.privacy.section1.point1': 'Account info is used only for sync and authentication.',
    'policy.privacy.section1.point2': 'You can export or delete local and cloud data anytime.',
    'policy.privacy.section2.title': 'How we use it',
    'policy.privacy.section2.body': 'Data is only used for personalized suggestions and analytics. We never sell data to advertisers.',
    'policy.privacy.section2.point1': 'Analytics use anonymized, aggregated data only.',
    'policy.privacy.section2.point2': 'We publish transparency updates regularly.',
    'policy.privacy.section3.title': 'Security',
    'policy.privacy.section3.body': 'All traffic is encrypted with TLS. Cloud storage is isolated by partitions, and sensitive fields are salted and hashed in the database.',
    'policy.privacy.section3.point1': 'Core infrastructure follows ISO/IEC 27001 security practices.',
    'policy.privacy.section3.point2': 'Suspicious access triggers alerts and supports one-click account freeze.',
    'policy.privacy.footer': "For privacy questions, email privacy@deepstudent.ai. We'll respond within 3 business days.",

    'policy.terms.title': 'Terms of Use',
    'policy.terms.description': 'By using DeepStudent, you agree to the terms below. DeepStudent is a learning aid and does not guarantee outcomes.',
    'policy.terms.section1.title': 'Service',
    'policy.terms.section1.body': 'We provide mistake tracking, smart review, AI assistance, and more, continuously improving with each release.',
    'policy.terms.section1.point1': 'Preview features may be unstable.',
    'policy.terms.section1.point2': 'We may adjust or pause the service at any time.',
    'policy.terms.section2.title': 'Your responsibilities',
    'policy.terms.section2.body': 'You must have the rights to any content you upload and are responsible for your account security. Contact us immediately if you suspect leakage or sharing.',
    'policy.terms.section2.point1': 'Do not use DeepStudent for illegal or infringing content.',
    'policy.terms.section2.point2': 'We may limit accounts with suspicious activity.',
    'policy.terms.section3.title': 'Disclaimer',
    'policy.terms.section3.body': 'We do our best to keep the service reliable, but we are not liable for indirect losses due to force majeure or third-party causes (e.g., data loss or downtime).',
    'policy.terms.section3.point1': 'We recommend exporting backups regularly.',
    'policy.terms.section3.point2': 'For refunds, submit a request within 7 days.',
    'policy.terms.footer': 'Using this service means you agree to these terms. Questions? Contact support@deepstudent.ai.',
    
    // Policy
    'policy.understood': 'I Understand',
    'policy.close': 'Close dialog',
    
    // Theme
    'theme.system': 'System',
    'theme.light': 'Light Mode',
    'theme.dark': 'Dark Mode',
    
    // Locale
    'locale.select': 'Language',
    'locale.zh': '简体中文',
    'locale.zhHant': '繁體中文',
    'locale.en': 'English',
  },
}

// Create a locale store for external sync
const localeStore = (() => {
  let locale = 'zh'
  let cachedSnapshot = { locale }
  const listeners = new Set()
  const validLocales = ['zh', 'zh-Hant', 'en']

  const updateSnapshot = () => {
    cachedSnapshot = { locale }
  }

  const applyLocale = (newLocale) => {
    if (typeof document === 'undefined') return
    document.documentElement.lang =
      newLocale === 'zh'
        ? 'zh-CN'
        : newLocale === 'zh-Hant'
          ? 'zh-Hant'
          : 'en'
    updateSnapshot()
  }

  const setLocale = (newLocale) => {
    if (!validLocales.includes(newLocale)) return
    locale = newLocale
    if (typeof localStorage !== 'undefined') {
      localStorage.setItem(LOCALE_KEY, newLocale)
    }
    applyLocale(newLocale)
    listeners.forEach((l) => l())
  }

  const init = () => {
    if (typeof window === 'undefined') return

    // Read stored preference or detect from browser
    const stored = localStorage.getItem(LOCALE_KEY)
    if (stored && validLocales.includes(stored)) {
      locale = stored
    } else {
      // Auto-detect from browser language
      const browserLang = navigator.language || navigator.userLanguage
      const lower = String(browserLang || '').toLowerCase()
      if (lower.startsWith('zh')) {
        locale =
          lower.includes('hant') || lower.includes('tw') || lower.includes('hk') || lower.includes('mo')
            ? 'zh-Hant'
            : 'zh'
      } else {
        locale = 'en'
      }
    }
    applyLocale(locale)
    updateSnapshot()
  }

  const subscribe = (listener) => {
    listeners.add(listener)
    if (listeners.size === 1) init()
    return () => listeners.delete(listener)
  }

  const getSnapshot = () => cachedSnapshot
  const getServerSnapshot = () => ({ locale: 'zh' })

  return { subscribe, getSnapshot, getServerSnapshot, setLocale }
})()

// Hook to use locale
export const useLocale = () => {
  const state = useSyncExternalStore(
    localeStore.subscribe,
    localeStore.getSnapshot,
    localeStore.getServerSnapshot
  )

  const setLocale = useCallback((newLocale) => {
    localeStore.setLocale(newLocale)
  }, [])

  // Translation function
  const t = useCallback(
    (key, fallback, vars) => {
      const template = translations[state.locale]?.[key] || fallback || key
      if (!vars) return template
      return String(template).replace(/\{(\w+)\}/g, (match, name) => {
        if (!(name in vars)) return match
        const value = vars[name]
        return value === undefined || value === null ? '' : String(value)
      })
    },
    [state.locale]
  )

  return {
    locale: state.locale,
    setLocale,
    t,
    isZh: state.locale === 'zh',
    isZhHant: state.locale === 'zh-Hant',
    isChinese: state.locale === 'zh' || state.locale === 'zh-Hant',
    isEn: state.locale === 'en',
  }
}

// Locale selector - dropdown
export const LocaleToggle = ({ className = '', compact = false }) => {
  const { locale, setLocale, t } = useLocale()

  return (
    <div className={cn('relative inline-flex items-center w-full', className)}>
      <label className="sr-only" htmlFor="ds-locale-select">
        {t('locale.select', 'Language')}
      </label>
      <select
        id="ds-locale-select"
        value={locale}
        onChange={(event) => setLocale(event.target.value)}
        className={cn(
          'focus-ring appearance-none cursor-pointer',
          compact ? 'h-8 w-full rounded-full' : 'h-9 w-full rounded-full',
          'bg-[color:var(--apple-btn-secondary-bg)] border border-[color:var(--apple-line)]',
          'backdrop-blur-xl backdrop-saturate-[180%]',
          'shadow-[var(--apple-shadow-sm)]',
          compact
            ? 'text-[color:var(--apple-ink)] text-[12px] font-medium'
            : 'text-[color:var(--apple-ink)] text-[13px] font-medium',
          'px-4 leading-none text-center',
          'hover:bg-[color:var(--apple-btn-secondary-bg-hover)]',
        )}
        aria-label={t('locale.select', 'Language')}
      >
        <option value="zh">{t('locale.zh', '简体中文')}</option>
        <option value="zh-Hant">{t('locale.zhHant', '繁體中文')}</option>
        <option value="en">{t('locale.en', 'English')}</option>
      </select>
    </div>
  )
}

export default LocaleToggle
